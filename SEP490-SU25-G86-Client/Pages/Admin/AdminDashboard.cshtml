@page
@model SEP490_SU25_G86_Client.Pages.AdminDashboardModel
@{
    ViewData["Title"] = "Admin Dashboard";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #eef7f7;
            margin: 0;
        }

        .sidebar {
            background-color: #fff;
            border-right: 1px solid #dee2e6;
            min-height: 100vh;
            padding-top: 20px;
        }

            .sidebar .btn {
                background-color: #309689;
                color: white;
            }

                .sidebar .btn.active-btn {
                    background-color: #963330 !important;
                }
    </style>
</head>
<body>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 sidebar">
                <div class="d-grid gap-2 px-3">
                    <button class="btn active-btn" onclick="location.href='/Admin/AdminDashboard'">Thống Kê</button>
                    <button class="btn" onclick="location.href='/Admin/ManageAccount'">Quản Lý Tài Khoản</button>
                    <button class="btn" onclick="location.href='/Admin/ManageRequest'">Quản Lý Yêu Cầu</button>
                </div>
            </div>

            <!-- Main content -->
            <div class="col-md-10 p-4">
                <h3 class="mb-4">Biểu đồ Thống Kê Bài Tuyển Dụng</h3>
                <canvas id="jobPostChart" width="800" height="400"></canvas>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script>
        // Dữ liệu từ model
        const data = @Html.Raw(Json.Serialize(Model.MonthlyStats));

        const labels = data.map(d => `${d.month}/${d.year}`);
        const counts = data.map(d => d.count);

        const ctx = document.getElementById('jobPostChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Job Posts per Month',
                    data: counts,
                    backgroundColor: 'rgba(54, 162, 235, 0.6)'
                }]
            }
        });

        function activateButton(clickedBtn) {
            document.querySelectorAll('.sidebar .btn').forEach(btn => {
                btn.classList.remove('active-btn');
            });
            clickedBtn.classList.add('active-btn');
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>